# Project Context: CineView AI

## Overview
**CineView AI** is a React-based web application designed for filmmakers and video creators. It leverages the Google Gemini API (specifically the `gemini-3-flash-preview` model) to analyze uploaded videos from various professional filmmaking perspectives.

The application allows users to:
1.  **Upload a Video:** Supports video files (processed via Base64).
2.  **Select a Perspective:** Choose from predefined roles such as Director, Screenwriter, DOP (Director of Photography), Editor, or Acting Coach.
3.  **Receive AI Analysis:** Get detailed, role-specific feedback and critique generated by Gemini.
4.  **History Tracking:** Automatically saves the last 20 analysis sessions (results text only) for quick review.
5.  **Export Results:** Download analysis reports as Markdown files.

## Architecture & Tech Stack

### Core Technologies
*   **Frontend Framework:** React 19 (via Vite)
*   **Language:** TypeScript
*   **Build Tool:** Vite
*   **AI Integration:** `@google/genai` SDK
*   **Styling:** Tailwind CSS (inferred from class names like `bg-cinematic-900`)
*   **Markdown Rendering:** `react-markdown`

### Key Directories
*   `src/` (Root):
    *   `App.tsx`: Main application controller. Manages state for video data, selected perspective, and analysis results.
    *   `constants.tsx`: Defines the available `Perspectives` (Director, Writer, etc.) and their specific system prompts.
    *   `types.ts`: TypeScript interfaces for `Perspective`, `VideoData`, etc.
*   `components/`:
    *   `VideoUploader.tsx`: Handles file selection and preview generation.
    *   `PerspectiveSelector.tsx`: UI for choosing the analysis role.
    *   `AnalysisDisplay.tsx`: Renders the AI-generated markdown response.
    *   `Header.tsx`: Application header.
*   `services/`:
    *   `geminiService.ts`: Handles interaction with the Google Gemini API. Manages API key retrieval and prompt construction.
*   `utils/`:
    *   `fileUtils.ts`: Helper functions, primarily for converting files to Base64.

## Setup & Development

### Prerequisites
*   Node.js (v18+ recommended)
*   Google Gemini API Key

### Installation
1.  Install dependencies:
    ```bash
    npm install
    ```

### Configuration
1.  **BYOK (Bring Your Own Key):** The application now supports entering the API Key directly in the UI. You do not strictly need a `.env` file for production usage, but you can still use one for development convenience.
2.  (Optional) Create a `.env.local` file in the root directory:
    ```env
    GEMINI_API_KEY=your_default_api_key_here
    ```

### Running the App
*   **Development Server:**
    ```bash
    npm run dev
    ```
    Runs on `http://localhost:3000` (configured in `vite.config.ts`).

*   **Build for Production:**
    ```bash
    npm run build
    ```

*   **Preview Production Build:**
    ```bash
    npm run preview
    ```

## Key Workflows

### Video Analysis Flow & BYOK
1.  User enters their **Gemini API Key** via the "Key" button in the header (saved to Local Storage).
2.  User selects a file in `VideoUploader`.
3.  `App.tsx` calls `fileUtils` to convert the video to Base64 (lazy loading strategy).
4.  User selects a role in `PerspectiveSelector`.
5.  `App.tsx` triggers `analyzeVideo` from `geminiService.ts`, passing the **User's API Key**.
6.  `geminiService` sends the Base64 video and a role-specific prompt (from `constants.tsx`) to the Gemini API.
7.  The result is returned as a Markdown string and displayed in `AnalysisDisplay`.

## Conventions
*   **Environment Variables:** Accessed via `process.env` shimmed by Vite config, not standard `import.meta.env`.
*   **Styling:** Uses utility classes (Tailwind-style) with custom color palettes (e.g., `cinematic-900`).
*   **Types:** Centralized in `types.ts`.
*   **Prompts:** System prompts for AI analysis are stored in `constants.tsx` to keep logic separated from UI.
